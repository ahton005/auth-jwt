# Учебный проект для аутентификации/авторизации с JWT+SpringSecurity.

Сервис позволяет авторизоваться по логину паролю, для получения Bearer токена. Далее взаимодействие с сервисом,
происходит с использованием токена.

## Описание

Сервис содержит следующие методы

* GET /admin - Получить информацию для админов.
* GET /user - Получить информацию для пользователей.
* GET /anon - Доступ для всех.
* POST api/public/login - Получить токен доступа на основе логина/пароля. Принимает тело в виде

```
{
   "username": "test",
   "password": "test"
}
```

* POST api/public/registration - Зарегистрировать нового пользователя. Принимает тело в виде

```
{
   "username": "test",
   "email": "test@test.ru",
   "password": "test"
}
```

## OpenApi

##### /swagger-ui/index.html - страница графической оболочки OpenApi

## CI

Для автоматической сборки и тестирования создан [GitHub Actions](.github/workflows/gradle.yml).

## Тесты

Контроллеры и сервисы приложения покрыты модульными тестами с использованием Mockito
для создания заглушек репозитория и сервиса.

Для ручного тестирования создан файл [REQUESTS](rest/TEST_REQUESTS.http).

БД заполнена начальными данными
Пользователи:

* Логин - admin, Пароль - admin, Почта - admin@mail.ru
* Логин - user, Пароль - user, Почта - user@mail.ru

Привилегии(в данном случае эквивалент ролям):

* ROLE_ADMIN
* ROLE_USER

## Запуск

В корневой директории проекта лежит файл docker-compose для поднятия контейнера с БД(Postgress). Сервис запускается
командой ```./gradlew bootRun:run```.
